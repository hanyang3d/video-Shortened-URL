<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="utf-8">
    <title>페이지 이동 중...</title>
</head>
<body>
    <script>
        const params = new URLSearchParams(window.location.search);
        
        // 1. 데이터 가져오기
        const c = params.get('c') || '';
        const e = params.get('e') || '';
        const y = params.get('y') || '';
        let u = params.get('u') || '';
        const s = params.get('s') || '';

        // 2. [개선] 유튜브 핸들(@)만 왔을 경우 전체 주소로 복원
        if (u && u.startsWith('@')) {
            u = `https://www.youtube.com/${u}`;
        }

        const baseUrl = "https://airtable.com/appzPMEgLj1HAFx0U/pag3iTsj3fHFmRszB/form";

        // 3. 값이 있는 항목만 prefill 쿼리에 추가
        let prefillParts = [];
        if (c) prefillParts.push(`prefill_${encodeURIComponent("*필수* 기업명")}=${encodeURIComponent(c)}`);
        if (e) prefillParts.push(`prefill_${encodeURIComponent("*필수* 링크받을 메일 주소")}=${encodeURIComponent(e)}`);
        if (y) prefillParts.push(`prefill_${encodeURIComponent("(유튜브용) 고정 문구 & 연락처 (최하단에 작성됩니다)")}=${encodeURIComponent(y)}`);
        if (u) prefillParts.push(`prefill_${encodeURIComponent("유튜브 주소")}=${encodeURIComponent(u)}`);
        if (s) {
            prefillParts.push(`prefill_${encodeURIComponent("구독 관리")}=${encodeURIComponent(s)}`);
            prefillParts.push(`hide_${encodeURIComponent("구독 관리")}=true`);
        }

        window.location.href = `${baseUrl}?${prefillParts.join('&')}`;
    </script>
    <p style="text-align:center; padding-top:100px; font-family:sans-serif; color:#666;">
        신청 양식으로 이동 중입니다...
    </p>
</body>
</html>
